<!--[* $Id$ *]-->
<!--[pnajaxheader lightbox=true]-->
<!--[pnpagesetvar name='title' value="`$album.title` :: `$mediaItem.title`"]-->

<script type="text/javascript" src="modules/mediashare/pnjavascript/view.js"></script>
<script type="text/javascript" src="javascript/ajax/prototype.js"></script>
<script type="text/javascript" src="javascript/ajax/scriptaculous.js"></script>
<script type="text/javascript" src="javascript/ajax/effects.js"></script>
<script type="text/javascript" src="modules/mediashare/pntemplates/Frontend/Lightbox/slideshow.js"></script>

<script type="text/javascript">
//<![CDATA[
    var Slideshow = new MediashareSlideshow();

    <!--[foreach from=$mediaItems item=item]-->
    Slideshow.AddItem(<!--[$item.id]-->, "<!--[$baseurl]--><!--[mediashare_mediaUrl src=originalRef mediaItem=$item]-->", "<!--[$baseurl]--><!--[mediashare_mediaUrl src=previewRef mediaItem=$item]-->", "<!--[$item.originalMimeType]-->", "<!--[$item.html|escape:javascript]-->", "<!--[$item.title|pnvarprepfordisplay]-->. <!--[$item.description|pnvarprepfordisplay]-->");
    <!--[/foreach]-->

    var pnmlStart   = "<!--[gt text='Start']-->";
    var pnmlStop    = "<!--[gt text='Stop']-->";
    var pnmlSmaller = "<!--[gt text='Show smaller image']-->";
    var pnmlLarger  = "<!--[gt text='Show original image']-->";
    var baseURL     = "<!--[pngetbaseurl]-->";
//]]>
</script>

<!--[if count($mediaItems) > 0]-->

<div class="mediashare-slideshow">
  <div class="mediashare-menu">
    <div style="float: left" id="mediaCount"></div>
    <div style="float: right"><a href="<!--[$quitUrl|escape:html]-->"><!--[gt text='Quit']--></a></div>
    <div style="float: left">
      <a href="#" onclick="Slideshow.HandleSize()" id="slideshowSizeAnchor"><!--[gt text='Show smaller image']--></a>
      | <label for="slideshowToggleTitle"><!--[gt text='Show title']--></label> <input type="checkbox" checked="checked" id="slideshowToggleTitle" onclick="Slideshow.HandleToggleTitle()"/>
    </div>
    <a href="#" onclick="Slideshow.HandlePrevious()"><img src="<!--[$baseurl]-->modules/mediashare/pntemplates/Frontend/Lightbox/images/back.gif" alt="<!--[gt text='Previous']-->"/></a>
    <a href="#" onclick="Slideshow.HandleToggleStart()"><img src="<!--[$baseurl]-->modules/mediashare/pntemplates/Frontend/Lightbox/images/pause.gif" alt="<!--[gt text='Stop']-->" id="slideshowStateImg"/></a>
    <a href="#" onclick="Slideshow.HandleNext()"><img src="<!--[$baseurl]-->modules/mediashare/pntemplates/Frontend/Lightbox/images/forward.gif" alt="<!--[gt text='Next']-->"/></a>
    <a href="#" onclick="Slideshow.HandleAdjustSpeed(-1)">-</a>
    <span id="mediaTimeSpan">5</span>
    <a href="#" onclick="Slideshow.HandleAdjustSpeed(+1)">+</a>
  </div>
  <div id="mediaDisplayBox">
    <div id="mediaBox">
      <div id="mediaTitleBox" style="display: none"><span id="mediaTitle"></span></div>
      <div id="mediaItem"></div>
    </div>
  </div>
</div>

<script type="text/javascript">
//<![CDATA[
    Event.observe(window, 'load', function(){Slideshow.Start(<!--[$mediaId]-->)}, false);
//]]>
</script>
<!--[else]-->
<div class="mediashare-slideshow">
  <a href="javascript:history.back()"><!--[gt text='There are no media files in this album. Click here to return.']--></a>
</div>
<!--[/if]-->
